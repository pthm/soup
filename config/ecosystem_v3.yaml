# =============================================================================
# Ecosystem v3 - Tuned for Sustainability
# =============================================================================
# Key improvements over v2:
#   - Cell capacity (0.8) keeps resource hotspots concentrated instead of
#     spreading thin everywhere - particles deposit instantly up to capacity
#   - Lower prey movement costs enable migration without starvation
#   - Higher predator base cost creates responsive predator die-off
#   - Higher breeding threshold + cooldown jitter prevents synchronized breeding
#   - Faster predator breeding with density dependence creates pressure
#
# Observed dynamics:
#   - ~590 seconds of stable oscillating ecosystem
#   - Prey: 300-530 at 79-87% energy
#   - Resources: 21-35% utilization (sustained by cell capacity)
#   - 8-11 predators actively hunting (1-10 kills per window)
#   - Even during decline, prey maintain 19-23% energy
# =============================================================================

population:
  initial: 60                     # Lower starting population prevents resource crash
  predator_spawn_chance: 0.05     # ~3 predators to start
  min_predators: 0                # No artificial floor
  min_prey: 0                     # No artificial floor
  max_pred: 8                     # Allow responsive predator population
  max_prey: 300                   # Lower cap to prevent resource crash

resource:
  contrast: 2.0                   # Sharper edges, more defined hotspots
  forage_efficiency: 1.0          # Full efficiency
  graze_radius: 1                 # Smaller depletion zone (3x3 kernel)

energy:
  predator:
    digest_time: 1.0              # Faster hunting cycles
    base_cost: 0.012              # Higher starvation - die faster when not hunting
    move_cost: 0.04               # Moderate movement cost
    bite_reward: 0.60             # Higher reward per kill
  prey:
    base_cost: 0.010              # Lower base metabolism
    move_cost: 0.06               # Half default - migration is cheap
    forage_rate: 0.09             # Higher forage rate (default 0.045)
    grazing_peak: 0.15            # Optimal grazing at 15% speed
    accel_cost: 0.015             # Half default - less penalty for acceleration

refugia:
  strength: 0.75                  # Strong protection in resource areas

reproduction:
  prey_threshold: 0.65            # Higher threshold - fewer breed at once
  prey_cooldown: 12.0             # Longer cooldown - spread out breeding
  cooldown_jitter: 4.0            # High jitter to desynchronize (default 1.0)
  parent_energy_split: 0.45       # Parent keeps less - longer recovery
  pred_cooldown: 20.0             # Faster predator breeding
  pred_threshold: 0.85            # Predators need good hunting to breed
  pred_density_k: 300             # Strong density dependence

# Resource regeneration - particles bring mass into the world
# Particles deposit instantly up to cell capacity, keeping excess to drift elsewhere
particles:
  spawn_rate: 800                 # Higher spawn rate
  initial_mass: 0.03              # Moderate mass per particle
  cell_capacity: 0.8              # Cells cap at 0.8 - keeps hotspots concentrated
  # Total input: 800 Ã— 0.03 = 24 resource/sec (matches ~300 prey consumption)
