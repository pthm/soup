# NEAT Configuration for Soup Neuroevolution
# This file configures the neural network evolution parameters

neat:
  # Structural mutation rates
  # These control how often new nodes and connections are added
  mutate_add_node_prob: 0.03      # Probability of adding a new hidden node
  mutate_add_link_prob: 0.05      # Probability of adding a new connection
  mutate_toggle_enable_prob: 0.01 # Probability of toggling a connection on/off

  # Weight mutation
  # Controls how connection weights change
  mutate_link_weights_prob: 0.8   # Probability of mutating weights
  weight_mut_power: 2.5           # Strength of weight perturbations
  mutate_only_prob: 0.25          # Probability of mutating without mating
  mutate_random_trait_prob: 0.1   # Probability of random trait mutation

  # Mating probabilities
  # Controls how genomes are combined during reproduction
  mate_multipoint_prob: 0.6       # Gene-by-gene crossover with random selection
  mate_multipoint_avg_prob: 0.4   # Gene-by-gene with weight averaging
  mate_singlepoint_prob: 0.0      # Single crossover point (disabled)
  mate_only_prob: 0.2             # Probability of mating without mutation

  # Speciation
  # Controls how organisms are grouped into species
  compat_threshold: 3.0           # Distance threshold for same species
  disjoint_coeff: 1.0             # Importance of disjoint genes
  excess_coeff: 1.0               # Importance of excess genes
  weight_diff_coeff: 0.4          # Importance of weight differences

  # Species management
  dropoff_age: 15                 # Generations of no improvement before removal
  survival_thresh: 0.2            # Top fraction of species that survives
  age_significance: 1.0           # How much age affects fitness sharing

  # Population (reference value - actual population managed by simulation)
  pop_size: 150

# CPPN Configuration
# Controls body morphology generation
cppn:
  grid_size: 8                    # Query grid resolution (8x8)
  max_cells: 32                   # Maximum cells per organism
  cell_threshold: 0.0             # Presence output threshold for cell creation

# Brain Configuration
# Controls the brain neural network
brain:
  inputs: 14                      # Number of sensory inputs
  outputs: 8                      # Number of behavior outputs
  initial_connection_prob: 0.3    # Initial connectivity when creating new genomes

# Evolution tuning notes:
#
# For more exploration (diverse solutions):
#   - Increase compat_threshold (more species, smaller niches)
#   - Increase mutation rates
#   - Decrease survival_thresh
#
# For faster convergence (exploit good solutions):
#   - Decrease compat_threshold (fewer species, larger populations)
#   - Decrease structural mutation rates
#   - Increase survival_thresh
#
# If species go extinct too quickly:
#   - Increase dropoff_age
#   - Decrease compat_threshold
#
# If evolution stagnates:
#   - Increase structural mutation rates
#   - Increase weight_mut_power
#   - Decrease compat_threshold to merge similar species
